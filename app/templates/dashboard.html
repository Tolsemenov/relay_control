{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h3>üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∞–≤—Ç–æ–ø–æ–ª–∏–≤–∞</h3>
  <a href="{{ url_for('dashboard.add_schedule') }}" class="btn btn-success btn-sm mb-3">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</a>

  {% if schedules %}
    <!-- –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è -->
    <div class="d-block d-md-none">
      {% for s in schedules %}
      <div class="card mb-3">
        <div class="card-body">
          <h5 class="card-title">{{ s.target.value }}</h5>
          <p class="card-text">
            <strong>–î–Ω–∏:</strong> {{ s.days }}<br>
            <strong>–í—Ä–µ–º—è:</strong> {{ s.time_on.strftime('%H:%M') }}<br>
            <strong>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:</strong> {{ s.duration_min }} –º–∏–Ω<br>
            <strong>–í–∫–ª:</strong> {% if s.enabled %}‚úÖ{% else %}‚ùå{% endif %}
          </p>
          <div class="d-flex justify-content-end">
            <a href="{{ url_for('dashboard.edit_schedule', schedule_id=s.id) }}" class="btn btn-primary btn-sm me-2">‚úèÔ∏è</a>
            <a href="{{ url_for('dashboard.delete_schedule', schedule_id=s.id) }}" class="btn btn-danger btn-sm"
               onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É {{ s.id }}?');">üóëÔ∏è</a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <!-- –î–µ—Å–∫—Ç–æ–ø–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ -->
    <div class="table-responsive d-none d-md-block">
      <table class="table table-bordered table-hover">
        <thead class="table-light">
          <tr>
            <th>ID</th>
            <th>–†–µ–ª–µ</th>
            <th>–î–Ω–∏</th>
            <th>–í—Ä–µ–º—è</th>
            <th>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω)</th>
            <th>–í–∫–ª.</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          {% for s in schedules %}
          <tr>
            <td>{{ s.id }}</td>
            <td>{{ s.target.value }}</td>
            <td>{{ s.days }}</td>
            <td>{{ s.time_on.strftime('%H:%M') }}</td>
            <td>{{ s.duration_min }}</td>
            <td>{% if s.enabled %}‚úÖ{% else %}‚ùå{% endif %}</td>
            <td class="d-flex gap-1">
              <a href="{{ url_for('dashboard.edit_schedule', schedule_id=s.id) }}" class="btn btn-sm btn-primary" title="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å">‚úèÔ∏è</a>
              <a href="{{ url_for('dashboard.toggle_schedule', schedule_id=s.id) }}" class="btn btn-sm {% if s.enabled %}btn-warning{% else %}btn-success{% endif %}" title="–ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å">
                {% if s.enabled %}üö´{% else %}‚úÖ{% endif %}
              </a>
              <a href="{{ url_for('dashboard.delete_schedule', schedule_id=s.id) }}"
                 class="btn btn-sm btn-danger"
                 onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É {{ s.id }}?');">üóëÔ∏è</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <p class="text-muted">–ü–æ–∫–∞ –Ω–µ—Ç –∑–∞–¥–∞–Ω–∏–π –≤ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–∏.</p>
  {% endif %}
</div>
{% endblock %}
